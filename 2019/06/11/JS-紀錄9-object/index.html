<!DOCTYPE html>












  


<html class="theme-next pisces use-motion" lang="zh-TW">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-139836366-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-139836366-1');
</script>























<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/css/main.css?v=7.1.1">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/QQ2.png?v=7.1.1">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/QQ2.png?v=7.1.1">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/QQ2.png?v=7.1.1">


  <link rel="mask-icon" href="/images/lQQ2.svg?v=7.1.1" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '7.1.1',
    sidebar: {"position":"right","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  





  <meta name="description" content="JavaScript Object">
<meta name="keywords" content="JavaScript">
<meta property="og:type" content="article">
<meta property="og:title" content="JS 紀錄9 - object">
<meta property="og:url" content="https://jimmywei01.github.io/2019/06/11/JS-紀錄9-object/index.html">
<meta property="og:site_name" content="Jimmy&#39;s Notes">
<meta property="og:description" content="JavaScript Object">
<meta property="og:locale" content="zh-TW">
<meta property="og:image" content="https://jimmywei01.github.io/2019/06/11/JS-紀錄9-object/j91.png">
<meta property="og:image" content="https://jimmywei01.github.io/2019/06/11/JS-紀錄9-object/j98.png">
<meta property="og:image" content="https://jimmywei01.github.io/2019/06/11/JS-紀錄9-object/j92.png">
<meta property="og:image" content="https://jimmywei01.github.io/2019/06/11/JS-紀錄9-object/j93.png">
<meta property="og:image" content="https://jimmywei01.github.io/2019/06/11/JS-紀錄9-object/j94.png">
<meta property="og:image" content="https://jimmywei01.github.io/2019/06/11/JS-紀錄9-object/j99.png">
<meta property="og:image" content="https://jimmywei01.github.io/2019/06/11/JS-紀錄9-object/j95.png">
<meta property="og:image" content="https://jimmywei01.github.io/2019/06/11/JS-紀錄9-object/j96.png">
<meta property="og:image" content="https://jimmywei01.github.io/2019/06/11/JS-紀錄9-object/j97.png">
<meta property="og:updated_time" content="2019-06-13T14:52:14.443Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="JS 紀錄9 - object">
<meta name="twitter:description" content="JavaScript Object">
<meta name="twitter:image" content="https://jimmywei01.github.io/2019/06/11/JS-紀錄9-object/j91.png">





  
  
  <link rel="canonical" href="https://jimmywei01.github.io/2019/06/11/JS-紀錄9-object/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>JS 紀錄9 - object | Jimmy's Notes</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-TW">

  
  
    
  

  <div class="container sidebar-position-right page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Jimmy's Notes</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">執著 / 不應該自我設限</p>
      
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切換導航欄">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首頁</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>標籤</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分類</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>歸檔</a>

  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>搜尋</a>
        </li>
      
    </ul>
  

  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜尋..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



  




</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jimmywei01.github.io/2019/06/11/JS-紀錄9-object/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jimmy Wei">
      <meta itemprop="description" content="光電/程式/工藝/設計/哲學">
      <meta itemprop="image" content="/images/panda.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jimmy's Notes">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">JS 紀錄9 - object<a href="https://github.com/user-name/repo-name/tree/branch-name/subdirectory-name_posts/JS-紀錄9-object.md" class="post-edit-link" title="編輯" rel="noopener" target="_blank"><i class="fa fa-pencil"></i></a>

              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">發表於</span>
              

              
                
              

              <time title="創建時間：2019-06-11 22:19:44" itemprop="dateCreated datePublished" datetime="2019-06-11T22:19:44+08:00">2019-06-11</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新於</span>
                
                <time title="修改時間：2019-06-13 22:52:14" itemprop="dateModified" datetime="2019-06-13T22:52:14+08:00">2019-06-13</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分類於</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/JavaScript/" itemprop="url" rel="index"><span itemprop="name">JavaScript</span></a></span>

                
                
              
            </span>
          

          
            
            
              
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <span class="post-meta-item-text">評論數：</span>
                <a href="/2019/06/11/JS-紀錄9-object/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/06/11/JS-紀錄9-object/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <blockquote class="blockquote-center"><p>JavaScript Object</p>
</blockquote>
<a id="more"></a>
<h1 id="物件導向"><a href="#物件導向" class="headerlink" title="物件導向"></a>物件導向</h1><ul>
<li>把情境(問題)描述為物件<ul>
<li>人 &amp; 香蕉</li>
</ul>
</li>
<li>描述物件的屬性 &amp; 方法<ul>
<li>人 - 屬性<ul>
<li>名子, 年齡, 有的物品</li>
</ul>
</li>
<li>人 - 方法<ul>
<li>打招呼, 走路, 接收物品</li>
</ul>
</li>
<li>香蕉 - 屬性<ul>
<li>名字, 價格, 味道 </li>
</ul>
</li>
<li>香蕉 - 方法<ul>
<li>剝⽪, 攻擊人</li>
</ul>
</li>
</ul>
</li>
<li>操作讓物件彼此互動<ul>
<li>A 跟 B 是⼈，A 有⼀根香蕉</li>
<li>A.打招呼( )</li>
<li>A.給予( B , 香蕉)<ul>
<li>B -&gt; 香蕉.剝⽪( )</li>
<li>B.吃( 香蕉 )</li>
</ul>
</li>
</ul>
</li>
<li>「<font style="color:red;font-size:15px;">類別</font>」可想像成是建構某特定物體的藍圖或模具，而「實體」就是按照這藍圖或模具製造出來的成品，並使用「建構子」來建立和初始化實體</li>
<li>「<font style="color:red;font-size:15px;">繼承</font>」定義一個類別，其特性繼承於另外一個類別，稱它們為「父類別」與「子類別」，而子類別「繼承」了父類別的特性</li>
<li>「<font style="color:red;font-size:15px;">多型</font>」是指子類別除了擁有自己的方法外，這個方法還能覆寫來特化父類別的同名方法，以賦予其更特殊的行為</li>
</ul>
<hr>
<h1 id="new-關鍵字發生哪些事？"><a href="#new-關鍵字發生哪些事？" class="headerlink" title="new 關鍵字發生哪些事？"></a>new 關鍵字發生哪些事？</h1><ul>
<li>建立一個新的物件</li>
<li>將物件的 <code>.__proto__</code> 指向 <code>prototype</code>，形成原型鏈</li>
<li>將建構子的 this 指向 new 出來的新物件</li>
<li>回傳這個物件</li>
</ul>
<hr>
<h1 id="新增-修改屬性"><a href="#新增-修改屬性" class="headerlink" title="新增 / 修改屬性"></a>新增 / 修改屬性</h1><p><strong>有什麼特性</strong></p>
<ul>
<li>get &amp; set 方法 - 模擬 Private 成員 <ul>
<li>使用物件字面值的方式定義屬性</li>
<li>透過這樣方式產生的物件，所有的屬性都是「公開成員」可隨意變動</li>
</ul>
</li>
</ul>
<p><img src="/2019/06/11/JS-紀錄9-object/j91.png" alt="title"></p>
<ul>
<li>get 屬性讀取，不允許修改 </li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">function Person( name, age, gender )&#123;</span><br><span class="line">  this.getName = function()&#123;</span><br><span class="line">    return name</span><br><span class="line">  &#125;</span><br><span class="line">  this.getAge =function()&#123;</span><br><span class="line">    return age</span><br><span class="line">  &#125;</span><br><span class="line">  this.getGender = function()&#123;</span><br><span class="line">    return gender</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>set 修改屬性更新</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">  this.setName = function(name)&#123;</span><br><span class="line">     return this.setName = name</span><br><span class="line">   &#125;</span><br><span class="line">  </span><br><span class="line">  this.setGender = function(gender)&#123;</span><br><span class="line">     return this.setGender = gender</span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">  this.greeting = function()&#123;</span><br><span class="line">    console.log(&apos;Hello! My name is &apos; + this.getName() + &apos;.&apos;);</span><br><span class="line">  &#125;;</span><br><span class="line">  this.hello = function(person)&#123;</span><br><span class="line">    console.log(&apos;Hello&apos; + &apos; &apos;+person.name+&apos; &apos;+&quot;I&apos;m&quot;+&apos; ‘+this.getName())</span><br><span class="line">  &#125;</span><br><span class="line">  this.old = function(person)&#123;</span><br><span class="line">    console.log(&apos;Hello&apos; + &apos; &apos;+&quot;I&apos;m&quot;+&quot; &quot;+this.getName()+&apos; &apos;+&quot;I&apos;m&quot;+&apos; &apos;+this.getAge()+&apos; &apos;+&apos;old&apos;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let person2 = new Person( &apos;John&apos;, 10, &apos;male&apos;);</span><br><span class="line">person2.greeting();           // &quot;Hello! My name is John.&quot;</span><br><span class="line">console.log(person2.getAge()) // 10</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="屬性描述器-Property-descriptor"><a href="#屬性描述器-Property-descriptor" class="headerlink" title="屬性描述器 (Property descriptor)"></a>屬性描述器 (Property descriptor)</h1><p><strong>是什麼</strong></p>
<ul>
<li>自己設定的屬性 稱為 屬性的特徵，而設定這些屬性特徵的函式稱為 屬性描述器</li>
<li>就算沒有屬性描述器，我們依然可以撰寫 JavaScript，但使用 屬性描述器 可以讓程式更為強健</li>
</ul>
<p><strong>有什麼特性</strong></p>
<ul>
<li>改善過去 constructor 函式與 ES6 Class 語法仍然是「一對一」關係的語法糖，只能宣告成員方法，無法宣告成員屬性</li>
<li>若要用 class 來模擬 private 透過 Object.defineProperty 加上 get、set 來處理</li>
<li>會直接對一個物件定義屬性或是修改現有的屬性。執行後會回傳定義完的物件</li>
<li>用來檢視屬性的特徵<ul>
<li>可否寫入(writable)</li>
<li>可否配置(configurable)</li>
<li>可否列舉(enumerable)</li>
</ul>
</li>
<li><font style="color:blue;font-size:15px;">Object.defineProperty(obj, prop, descriptor)</font><ul>
<li>obj<ul>
<li>要定義屬性的物件</li>
</ul>
</li>
<li>prop<ul>
<li>要被定義或修改的屬性名字</li>
</ul>
</li>
<li>descriptor<ul>
<li>要定義或修改物件敘述內容</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li><font style="color:blue;font-size:15px;">Object.getOwnPropertyDescriptor()</font><ul>
<li>檢查物件屬性描述器的狀態</li>
</ul>
</li>
</ul>
<ul>
<li>屬性描述器（Property descriptor）要透過 ES5 所提供的 Object.defineProperty() 來使用<ul>
<li>value: 屬性的值(<font style="color:red;font-size:15px;">唯一要設定的</font>)</li>
<li>writable: 定義屬性是否可以改變，如果是 false 那就是唯讀屬性(預設：false)</li>
<li>enumerable: 定義物件內的屬性是否可以透過 for-in 語法來迭代(預設：false)</li>
<li>configurable: 定義屬性是否可以被刪除、或修改屬性內的 writable、enumerable 及 configurable 設定(預設：false)</li>
<li>get: 物件屬性的 getter function 回傳有效值 (預設：undefined)</li>
<li>set: 物件屬性的 setter function 決定如何處理數據 (預設：undefined)</li>
<li>定義了 get 與 set 方法，表示要自行控制屬性的存取，那麼就不能再去定義 value 或 writable 的屬性描述</li>
</ul>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">var person = &#123;&#125;</span><br><span class="line">Object.defineProperty(person,&apos;name&apos;,&#123;</span><br><span class="line">  value:&apos;jimmy&apos;,</span><br><span class="line">  writable:false // 不可被寫入(自定義)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// 檢查物件屬性描述器的狀態</span><br><span class="line">console.log(Object.getOwnPropertyDescriptor(person, &apos;name’))</span><br><span class="line">// &#123;value: &quot;jimmy&quot;, writable: false, enumerable: false, configurable: false&#125;</span><br><span class="line"></span><br><span class="line">console.log(person.name)   // jimmy</span><br><span class="line">person.name=&apos;jj&apos;           // writable:true or false</span><br><span class="line">console.log(person.name)   // jj or jimmy</span><br><span class="line"></span><br><span class="line">/*----------------------------------</span><br><span class="line">function Archiver() &#123;</span><br><span class="line">  var temperature = null;</span><br><span class="line">  var archive = [];</span><br><span class="line"></span><br><span class="line">  Object.defineProperty(this, &apos;temperature&apos;, &#123;</span><br><span class="line">    get: function() &#123;</span><br><span class="line">      console.log(&apos;get!&apos;);</span><br><span class="line">      console.log(this)</span><br><span class="line">      return temperature;</span><br><span class="line">    &#125;,</span><br><span class="line">    set: function(value) &#123;</span><br><span class="line">      temperature = value;</span><br><span class="line">      archive.push(&#123; val: temperature &#125;);</span><br><span class="line">      console.log(archive)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">  this.getArchive = function() &#123; return archive; &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let arc = new Archiver();</span><br><span class="line">arc.temperature;        // &apos;get!&apos;</span><br><span class="line">arc.temperature = 11;</span><br><span class="line">arc.temperature = 13;</span><br><span class="line">arc.getArchive();       // [&#123; val: 11 &#125;, &#123; val: 13 &#125;]</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="constructor、prototype、proto和原型鏈"><a href="#constructor、prototype、proto和原型鏈" class="headerlink" title="constructor、prototype、proto和原型鏈"></a>constructor、prototype、<strong>proto</strong>和原型鏈</h1><h2 id="Function-對象-object"><a href="#Function-對象-object" class="headerlink" title="Function, 對象(object)"></a>Function, 對象(object)</h2><ul>
<li>對象由函數創建，函數都是 Function 實例對象</li>
</ul>
<p><img src="/2019/06/11/JS-紀錄9-object/j98.png" alt="title"></p>
<ul>
<li>Function 函數是 <font style="color:red;font-size:15px;">Person</font> 函數的構造函數</li>
<li>Function 函數同時是<font style="color:red;font-size:15px;">自己</font>的構造函數</li>
<li>Function 函數同樣是 <font style="color:red;font-size:15px;">Object</font> 對象的構造函數</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">function Person()&#123;&#125; </span><br><span class="line">console.log(Person.constructor)   // ƒ Function() &#123; [native code] &#125;</span><br><span class="line">console.log(Function.constructor) // ƒ Function() &#123; [native code] &#125;</span><br><span class="line">console.log(Object.constructor)   // ƒ Function() &#123; [native code] &#125;</span><br></pre></td></tr></table></figure>
<h2 id="建構式-Constructor"><a href="#建構式-Constructor" class="headerlink" title="建構式 (Constructor)"></a>建構式 (Constructor)</h2><p><strong>有什麼特性</strong></p>
<ul>
<li>有 function 就有 constructor</li>
<li>只能使用 function，不能使用箭頭函式</li>
</ul>
<p><strong>流程</strong></p>
<ul>
<li>產生一個新物件的 constructor 屬性設為 Person ，這個 Function 物件建立了一個 Person 建構式 (constructor) ，透過 <font style="color:red;font-size:15px;">new</font> 關鍵字來建立各種<font style="color:blue;font-size:15px;">實例物件</font><ul>
<li>這個物件<font style="color:blue;font-size:15px;">繼承 Person.prototype</font> (Function 物件)</li>
<li>person1 與 person2 是 <font style="color:blue;font-size:15px;">Person 的實例對象</font>，他們的 constructor 指<font style="color:red;font-size:15px;">指向</font>創建它們的 <font style="color:blue;font-size:15px;">Person 函數</font></li>
<li>Person 是函數，同時也是 <font style="color:blue;font-size:15px;">Function 的實例對象</font>，它的 constructor <font style="color:red;font-size:15px;">指向</font>創建它的 <font style="color:blue;font-size:15px;">Function 函數</font></li>
<li>Function 函數，它是 <font style="color:blue;font-size:15px;">JS 的內建對象</font>，它的構造函數是它自己，所以內部 constructor <font style="color:red;font-size:15px;">指向</font><font style="color:blue;font-size:15px;">自己</font></li>
</ul>
</li>
</ul>
<p><img src="/2019/06/11/JS-紀錄9-object/j92.png" alt="title"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">function Person(name,age)&#123;</span><br><span class="line">  this.name = name</span><br><span class="line">  this.age = age</span><br><span class="line">  this.greeting = function()&#123;</span><br><span class="line">    console.log(&apos;Hello! My name is &apos; + this.name + &apos;.&apos;);</span><br><span class="line">  &#125;;</span><br><span class="line">  this.hello = function(Person)&#123;</span><br><span class="line">    console.log(&apos;Hello&apos; + &apos; &apos;+Person.name+&apos; &apos;+&quot;I&apos;m&quot;+&apos; &apos;+this.name+&apos; &apos;+this.age)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let person1 = new Person(&apos;jimmy&apos;,30)</span><br><span class="line">person1.greeting()       // &quot;Hello! My name is jimmy.&quot;</span><br><span class="line"></span><br><span class="line">let person2 = new Person( &apos;John&apos;, 10);</span><br><span class="line">person2.greeting();      // &quot;Hello! My name is John.&quot;</span><br><span class="line">person1.hello(person2)   // &quot;Hello John I&apos;m jimmy 30&quot;</span><br></pre></td></tr></table></figure>
<h2 id="prototype-原型對象"><a href="#prototype-原型對象" class="headerlink" title="prototype (原型對象)"></a>prototype (原型對象)</h2><ul>
<li>JS 並沒有對所建立的函式區分建構函式與一般的函式，所以<font style="color:blue;font-size:15px;">只要是函式，就一定會有 prototype 屬性</font>(除了語言內建的函式不會有這個屬性)</li>
<li>prototype 存檔點一樣裡面放著許多<font style="color:red;font-size:15px;">屬性＆方法(共用)</font></li>
<li>function 自帶 prototype 存檔點</li>
<li>實例物件沒有 prototype(只會繼承上一個的 prototype 方法)，因為<font style="color:red;font-size:15px;">實例物件沒有 function</font></li>
</ul>
<font style="color:red;font-size:18px;"><strong>缺點1</strong></font>

<ul>
<li>constructor 生成的實例對象，有一個缺點就是<font style="color:red;font-size:15px;">無法共享屬性和方法(佔記憶體空間)</font></li>
<li>因為沒有 class，所以它的繼承方法是透過 「原型」(prototype) 來進行實作</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// 設定相同方法 但不等於一樣並且佔據記憶體空間</span><br><span class="line">person1.atk = function() &#123;</span><br><span class="line">    console.log(&apos;攻擊&apos;)</span><br><span class="line">&#125;</span><br><span class="line">person2.atk = function() &#123;</span><br><span class="line">    console.log(&apos;攻擊&apos;)</span><br><span class="line">&#125;</span><br><span class="line">console.log(person1.atk === person2.atk) // false</span><br></pre></td></tr></table></figure>
<font style="color:blue;font-size:18px;"><strong>改善</strong></font>

<ul>
<li>透過「原型」繼承可以讓本來沒有某個屬性的物件去存取其他物件的屬性(可共享)</li>
<li>所有實例物件<font style="color:blue;font-size:15px;">需要共享</font>的屬性和方法，都放在 prototype 裡面</li>
<li>那些<font style="color:blue;font-size:15px;">不需要共享</font>的屬性和方法，就放在 constructor 裡面</li>
</ul>
<p><img src="/2019/06/11/JS-紀錄9-object/j93.png" alt="title"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// 設定共用方法在 prototype 裡面</span><br><span class="line">Person.prototype.atk = function()&#123;</span><br><span class="line">    return this.name+&apos; &apos;+&apos;攻擊&apos;</span><br><span class="line">  &#125;</span><br><span class="line">console.log(person1.atk()) // &apos;攻擊&apos;</span><br><span class="line">console.log(person2.atk()) // &quot;攻擊&quot;</span><br><span class="line">console.log(person1.atk === person2.atk) // true</span><br></pre></td></tr></table></figure>
<font style="color:red;font-size:18px;"><strong>缺點2</strong></font>

<ul>
<li>new Person( ) 出來的多個實例中如果都有 constructor 屬性，並且都指向創建自己的構造函數，所以它們都各自佔據記憶體空間</li>
</ul>
<font style="color:blue;font-size:18px;"><strong>改善</strong></font>

<ul>
<li>constructor 可以被當成一個共享屬性存放在 prototype 中，作用也依然是指向自己的 constructor</li>
<li>也就是<font style="color:blue;font-size:15px;">默認 constructor 是被當做共享屬性</font>放在它們的原型對像 prototype 中</li>
</ul>
<p><img src="/2019/06/11/JS-紀錄9-object/j94.png" alt="title"></p>
<font style="color:red;font-size:18px;"><strong>缺點3</strong></font>

<ul>
<li>如果是共享屬性 constructor，那將兩個實例其中一個屬性改了，為什麼第二個實例沒同步？<ul>
<li>因為 <font style="color:blue;font-size:15px;">person1.constructor = Function</font> 改的並<font style="color:red;font-size:15px;">不是原型對像</font>上的共享屬性 constructor，而是<font style="color:blue;font-size:15px;">給實例 person1</font> 加了一個 constructor 屬性</li>
<li>可隨意更改新增實例的 constructor 屬性，但無法通過一個 <font style="color:blue;font-size:15px;">實例.constructor</font> 找回創建自己的構造函數(之間沒有箭頭鏈接)</li>
</ul>
</li>
</ul>
<p><img src="/2019/06/11/JS-紀錄9-object/j99.png" alt="title"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">function Person() &#123;&#125;</span><br><span class="line">var person1 = new Person()</span><br><span class="line">var person2 = new Person()</span><br><span class="line">console.log(person1.constructor) // ƒ Person() &#123;&#125;</span><br><span class="line">console.log(person2.constructor) // ƒ Person() &#123;&#125;</span><br><span class="line"></span><br><span class="line">person1.constructor = Function</span><br><span class="line">console.log(person1.constructor) // ƒ Function() &#123; [native code] &#125;</span><br><span class="line">console.log(person2.constructor) // ƒ Person() &#123;&#125;</span><br><span class="line">console.log(person1)             // Person &#123;constructor: ƒ&#125;</span><br><span class="line">console.log(person2)             // ƒ Person() &#123;&#125;</span><br></pre></td></tr></table></figure>
<font style="color:blue;font-size:18px;"><strong>改善</strong></font>

<h2 id="＿proto＿"><a href="#＿proto＿" class="headerlink" title="＿proto＿"></a>＿proto＿</h2><ul>
<li>讓實例物件找到自己的原形對象，每個物件都有一個 ＿proto＿ 內部屬性，幫助<font style="color:blue;font-size:15px;">物件間指向它繼承而來的原型 prototype 物件</font></li>
<li>＿proto＿ 這個內部屬性，它是一個存取器(accessor)屬性，意思是用 getter 和 setter 函式合成出來的屬性</li>
<li>用 new 的話必須要有 constructor ，所以 constructor 內的屬性會共享給實例</li>
</ul>
<p><img src="/2019/06/11/JS-紀錄9-object/j95.png" alt="title"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">// 創建自己的構造函數</span><br><span class="line">console.log(person1.__proto__.constructor) // ƒ Person() &#123;&#125;</span><br><span class="line">console.log(person1.constructor)           // ƒ Person() &#123;&#125;</span><br><span class="line">console.log(person1.constructor === person1.__proto__.constructor) // true</span><br><span class="line"></span><br><span class="line">// 創建自己的構造函數內部的 prototype（原型對象）</span><br><span class="line">console.log(person1.__proto__)             // &#123;atk: ƒ, constructor: ƒ&#125;</span><br><span class="line">console.log(person1.__proto__.__proto__)  </span><br><span class="line">// &#123;constructor: ƒ, __defineGetter__: ƒ, __defineSetter__: ƒ, hasOwnProperty: ƒ, __lookupGetter__: ƒ, …&#125;</span><br><span class="line"></span><br><span class="line">console.log(person1.__proto__.__proto__.constructor) // ƒ Object()</span><br><span class="line">console.log(person1.__proto__.__proto__.__proto__)   // null</span><br></pre></td></tr></table></figure>
<font style="color:blue;font-size:18px;"><strong>最後完整圖</strong></font>

<ul>
<li>實例對象.＿proto＿.constructor = 創建自己的 constructor </li>
<li>實例對象.＿proto＿ = 創建自己的 prototype（原型對象共用的東西都在裡面）</li>
<li>實例對象.prototype.＿proto＿.constructor = 原型對象<ul>
<li>Object 不會像 Function 一樣指向自己的 protoype ，如果指向那就會進入死回圈</li>
</ul>
</li>
</ul>
<p><img src="/2019/06/11/JS-紀錄9-object/j96.png" alt="title"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">console.log(person1.constructor)  // ƒ Person() &#123;&#125;</span><br><span class="line">console.log(Person.constructor)   // ƒ Function() &#123; [native code] &#125;</span><br><span class="line">console.log(Function.constructor) // ƒ Function() &#123; [native code] &#125;</span><br><span class="line">console.log(Object.constructor)   // ƒ Function() &#123; [native code] &#125;</span><br><span class="line"></span><br><span class="line">console.log(person1.__proto__.constructor)  // ƒ Person() &#123;&#125;</span><br><span class="line">console.log(Person.__proto__.constructor)   // ƒ Function() &#123; [native code] &#125;</span><br><span class="line">console.log(Function.__proto__.constructor) // ƒ Function() &#123; [native code] &#125;</span><br><span class="line">console.log(Object.__proto__.constructor)   // ƒ Function() &#123; [native code] &#125;</span><br><span class="line"></span><br><span class="line">console.log(Person.__proto__.constructor === Person.constructor) // true</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">console.log(person1.prototype)                        // undefined</span><br><span class="line">console.log(Person.prototype.__proto__.constructor)   // ƒ Object() &#123; [native code] </span><br><span class="line">console.log(Function.prototype.__proto__.constructor) // ƒ Object() &#123; [native code] &#125;</span><br><span class="line">console.log(Object.prototype.constructor)             // ƒ Object() &#123; [native code] &#125;</span><br><span class="line"></span><br><span class="line">console.log(person1.__proto__.__proto__.constructor)  // ƒ Object() &#123; [native code] &#125;</span><br><span class="line">console.log(Person.__proto__.__proto__.constructor)   // ƒ Object() &#123; [native code] &#125;</span><br><span class="line">console.log(Function.__proto__.__proto__.constructor) // ƒ Object() &#123; [native code] &#125;</span><br><span class="line">console.log(Object.__proto__.__proto__.constructor)   // ƒ Object() &#123; [native code] &#125;</span><br><span class="line"></span><br><span class="line">console.log(Person.prototype.__proto__.constructor === Person.__proto__.__proto__.constructor) </span><br><span class="line">// true</span><br></pre></td></tr></table></figure>
<h2 id="原型鏈-prototype-chain"><a href="#原型鏈-prototype-chain" class="headerlink" title="原型鏈 (prototype chain)"></a>原型鏈 (prototype chain)</h2><ul>
<li>由 ＿proto＿ 指向<font style="color:blue;font-size:15px;">連接起來的結構</font>，稱之為原型鏈(prototype chain)，也就是原型繼承的整個連接結構(紅色箭頭)</li>
<li>person -&gt; function -&gt; object -&gt; nul</li>
</ul>
<p><img src="/2019/06/11/JS-紀錄9-object/j97.png" alt="title"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">console.log(Person.constructor)             // ƒ Function() &#123; [native code] &#125;</span><br><span class="line">console.log(Person.__proto__)               // ƒ () &#123; [native code] &#125;</span><br><span class="line">console.log(Person.__proto__.constructor)   // ƒ Function() &#123; [native code] &#125;</span><br><span class="line"></span><br><span class="line">console.log(Person.__proto__.__proto__)            </span><br><span class="line">// &#123;constructor: ƒ, __defineGetter__: ƒ, __defineSetter__: ƒ, hasOwnProperty: ƒ, __lookupGetter__: ƒ, …&#125;</span><br><span class="line"></span><br><span class="line">console.log(Person.__proto__.__proto__.constructor) </span><br><span class="line">// ƒ Object() &#123; [native code] &#125;</span><br><span class="line"></span><br><span class="line">console.log(Person.__proto__.__proto__.__proto__)   // null</span><br></pre></td></tr></table></figure>
<font style="color:red;font-size:18px;"><strong>缺點</strong></font>

<ul>
<li>prototype 的 constructor 很容易被更改</li>
<li>所有所謂繼承下來的屬性全都是共享屬性</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">function GrandFather() &#123;</span><br><span class="line">    this.name = &apos;GrandFather&apos;</span><br><span class="line">&#125;</span><br><span class="line">function Father() &#123;</span><br><span class="line">    this.age = 40</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Father.prototype = new GrandFather()   // Father 函數改變自己的 prototype 指向</span><br><span class="line"></span><br><span class="line">function Son() &#123;&#125;</span><br><span class="line">Son.prototype = new Father()           // Son 函數改變自己的 prototype 指向</span><br><span class="line">console.log(Son.prototype.constructor) // ƒ GrandFather()</span><br><span class="line"></span><br><span class="line">var son = new Son()</span><br><span class="line">console.log(son.name)                  // GrandFather</span><br><span class="line">console.log(son.age)                   // 40</span><br></pre></td></tr></table></figure>
<font style="color:blue;font-size:18px;"><strong>改善</strong></font>

<ul>
<li>重新指向回自己的 prototype.constructor</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Son.prototype.constructor = Son</span><br><span class="line">console.log(Son.prototype.constructor)  // ƒ Son() &#123;&#125;</span><br><span class="line"></span><br><span class="line">let son2 = new Son()</span><br><span class="line">console.log(son2.name)                  // GrandFather</span><br><span class="line">console.log(son2.age)                   // 40</span><br></pre></td></tr></table></figure>
<h2 id="名詞整理"><a href="#名詞整理" class="headerlink" title="名詞整理"></a>名詞整理</h2><table>
<thead>
<tr>
<th></th>
<th>含義</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>constructor</td>
<td>建立實例對象的構造函數</td>
<td>容易被更改、放在 prototype 中當共享屬性</td>
</tr>
<tr>
<td>prototype</td>
<td>對象的原型對象</td>
<td>存放共享方法 / 屬性、節省記憶體、只要是 function 都有、實例對象沒有這屬性</td>
</tr>
<tr>
<td>＿proto＿</td>
<td></td>
<td>指向自己的原型對象、構成原型鍊、每個對象都有一個 ＿proto＿</td>
</tr>
</tbody>
</table>
<hr>
<h1 id="原型繼承-Prototype-based-inheritance"><a href="#原型繼承-Prototype-based-inheritance" class="headerlink" title="原型繼承(Prototype-based inheritance)"></a>原型繼承(Prototype-based inheritance)</h1><h2 id="基礎"><a href="#基礎" class="headerlink" title="基礎"></a>基礎</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">function Energy(name,age)&#123;</span><br><span class="line">  this.name = name</span><br><span class="line">  this.age = age</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 設定共同方法</span><br><span class="line">Energy.prototype.atk = function()&#123;</span><br><span class="line">  return this.name+&apos; &apos;+&apos;攻擊&apos;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 實例 1</span><br><span class="line">let Hulk = new Energy(&apos;Hulk&apos;,50)</span><br><span class="line">  </span><br><span class="line">// Hulk 自己的方法</span><br><span class="line">Hulk.call = function () &#123;</span><br><span class="line">  return this.name + &apos; 打電話&apos; </span><br><span class="line">&#125;</span><br><span class="line">console.log(Hulk.call())                           // Hulk 打電話</span><br><span class="line">console.log(Hulk.atk())                            // Hulk 攻擊</span><br><span class="line">console.log(Hulk.constructor)                      // function Energy</span><br><span class="line">console.log(Hulk.prototype)                        // undefined</span><br><span class="line">console.log(Hulk.__proto__)                        // &#123;atk: ƒ, constructor: ƒ&#125;</span><br><span class="line">console.log(Hulk.__proto__.constructor)            // function Energy</span><br><span class="line">console.log(Hulk.__proto__.__proto__.constructor)  // ƒ Object() &#123; [native code] &#125;</span><br><span class="line">console.log(Hulk.__proto__.__proto__.__proto__)    // null</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 實例 2</span><br><span class="line">let Iron = new Energy(&apos;Iron&apos;,53)</span><br><span class="line"></span><br><span class="line">// Iron 自己的方法</span><br><span class="line">Iron.call = function () &#123;</span><br><span class="line">  return this.name + &apos; 打電話&apos; </span><br><span class="line">&#125;</span><br><span class="line">console.log(Iron.call()) // Iron 打電話</span><br><span class="line">console.log(Iron.atk())  // Iron 攻擊</span><br><span class="line"></span><br><span class="line">// 判斷 constructor function 內外方法是否共用</span><br><span class="line">console.log(Hulk.call === Iron.call) // flase</span><br><span class="line">console.log(Hulk.atk === Iron.atk)   // true</span><br><span class="line"></span><br><span class="line">// 判斷某個物件是否存在於另一個物件的原型鏈中</span><br><span class="line">console.log(Energy.prototype.isPrototypeOf(Hulk)); // true</span><br></pre></td></tr></table></figure>
<h2 id="繼承"><a href="#繼承" class="headerlink" title="繼承"></a>繼承</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">function Energy(name,age)&#123;</span><br><span class="line">  this.name = name</span><br><span class="line">  this.age = age</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function Batman()&#123;&#125;</span><br><span class="line">console.log(Batman.prototype)         // &#123;constructor: ƒ&#125; Batman 未掛載到 Energy</span><br><span class="line"></span><br><span class="line">// Batman 函數改變自己的 prototype 指向(繼承)</span><br><span class="line">Batman.prototype = new Energy(&apos;Batman&apos;,65)</span><br><span class="line"></span><br><span class="line">// Batman 自己的 method</span><br><span class="line">Batman.speak = function()&#123;</span><br><span class="line">  return this.name + &apos; 打電話&apos; </span><br><span class="line">&#125;</span><br><span class="line">console.log(Batman.speak())           // Batman 打電話</span><br><span class="line">console.log(Batman.prototype)         // Energy&#123;name: &quot;Batman&quot;, age: 65&#125; 已掛載</span><br><span class="line">console.log(Batman.prototype.constructor)  // ƒ Energy(name,age)</span><br></pre></td></tr></table></figure>
<h3 id="不指向回自己"><a href="#不指向回自己" class="headerlink" title="不指向回自己"></a><font style="color:red;font-size:18px;">不指向回自己</font></h3><ul>
<li>在 prototype.constructor 底下建立實例，constructor 會指向繼承的 prototype，而原型鍊就不是在 Batman 下</li>
<li>micky2 -&gt; <font style="color:red;font-size:15px;">Energy</font> -&gt; Energy -&gt; Object -&gt; null</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">let micky2 = new Batman()</span><br><span class="line"></span><br><span class="line">console.log(micky2.name)                                      // Batman</span><br><span class="line">console.log(micky2.atk())                                     // Batman 攻擊</span><br><span class="line">console.log(micky2.constructor)                               // ƒ Energy(name,age)</span><br><span class="line">console.log(micky2.prototype)                                 // undefined</span><br><span class="line">console.log(micky2.__proto__)                                 // Energy&#123;name: &quot;Batman&quot;, age: 65&#125;</span><br><span class="line">console.log(micky2.__proto__.constructor)                     // ƒ Energy(name,age)</span><br><span class="line">console.log(micky2.__proto__.__proto__.constructor)           // ƒ Energy(name,age)</span><br><span class="line">console.log(micky2.__proto__.__proto__.__proto__.constructor) // ƒ Object()</span><br><span class="line">console.log(micky2.__proto__.__proto__.__proto__.__proto__)   // null</span><br><span class="line">console.log(Energy.prototype.isPrototypeOf(micky2));          // true</span><br><span class="line">console.log(Batman.prototype.isPrototypeOf(micky2));          // true</span><br></pre></td></tr></table></figure>
<h3 id="指向回自己"><a href="#指向回自己" class="headerlink" title="指向回自己"></a><font style="color:blue;font-size:18px;">指向回自己</font></h3><ul>
<li>後在 prototype.constructor 底下建立實例，constructor 一樣指向繼承的 prototype，而原型鍊會在 Batman 下</li>
<li>micky -&gt; <font style="color:red;font-size:15px;">Batman</font> -&gt; Energy -&gt; Object -&gt; null</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">// 指向回自己</span><br><span class="line">Batman.prototype.constructor = Batman </span><br><span class="line"></span><br><span class="line">console.log(Batman.prototype)              // Energy&#123;name: &quot;Batman&quot;, age: 65, constructor: ƒ&#125;</span><br><span class="line">console.log(Batman.prototype.constructor)  // ƒ Batman()&#123;&#125;</span><br><span class="line"></span><br><span class="line">let micky = new Batman()</span><br><span class="line"></span><br><span class="line">console.log(micky.name)                                      // Batman</span><br><span class="line">console.log(micky.atk())                                     // Batman 攻擊</span><br><span class="line">console.log(micky.prototype)                                 // undefined</span><br><span class="line">console.log(micky.constructor)                               // ƒ Batman()&#123;&#125;</span><br><span class="line">console.log(micky.__proto__)                             // Energy&#123;name: &quot;Batman&quot;, age: 65, constructor: ƒ&#125;</span><br><span class="line">console.log(micky.__proto__.constructor)                     // ƒ Batman()&#123;&#125;</span><br><span class="line">console.log(micky.__proto__.__proto__.constructor)           // ƒ Energy(name,age)</span><br><span class="line">console.log(micky.__proto__.__proto__.__proto__.constructor) // ƒ Object()</span><br><span class="line">console.log(micky.__proto__.__proto__.__proto__.__proto__)   // null</span><br><span class="line">console.log(Energy.prototype.isPrototypeOf(micky));          // true</span><br><span class="line">console.log(Batman.prototype.isPrototypeOf(micky));          // true</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="類別的繼承-Classical-inheritance-class-語法糖前身"><a href="#類別的繼承-Classical-inheritance-class-語法糖前身" class="headerlink" title="類別的繼承(Classical inheritance) - class 語法糖前身"></a>類別的繼承(Classical inheritance) - class 語法糖前身</h1><p><strong>有什麼特性</strong></p>
<ul>
<li>Object.create <font style="color:red;font-size:15px;">沒有 constructor</font> ，需要重新定義</li>
<li>模仿了傳統物件導向語言的類別方法，而達到繼承的功能</li>
</ul>
<p><strong>判斷</strong></p>
<ul>
<li>判斷某個物件是否存在於另一個物件</li>
<li>傳入對象將作為新建對象的原型</li>
</ul>
<h2 id="Object-create-prototype-descriptors"><a href="#Object-create-prototype-descriptors" class="headerlink" title="Object.create(prototype, descriptors)"></a><font style="color:blue;font-size:15px;">Object.create(prototype, descriptors)</font></h2><ul>
<li>有什麼特性<ul>
<li>定義一個物件當作原型物件</li>
<li>原型物件建立另一個新的物件(過程可以加入其他的屬性)</li>
<li>不會執行建構函式，繼承 prototype 的方法＆屬性</li>
</ul>
</li>
</ul>
<ul>
<li>參數<ul>
<li>prototype<ul>
<li>必需，要用作原型的對象，可以為 null(停止 prototype chain)</li>
</ul>
</li>
<li>descriptors<ul>
<li>屬性描述器<ul>
<li>可選，數據屬性包含 value，writable，enumerable，configurable 特性，未指定最後三個特性，則默認為 false </li>
<li>檢索或設置該值，  訪問器屬性包含 set 和/或 get 指定原型且可選擇性地指定屬性</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="isPrototypeOf-NaN"><a href="#isPrototypeOf-NaN" class="headerlink" title="isPrototypeOf"></a><font style="color:blue;font-size:15px;">isPrototypeOf</font></h2><ul>
<li>prototype.isPrototypeOf(object)</li>
<li>判斷某個物件是否存在於另一個物件的原型鏈結中</li>
</ul>
<h2 id="instanceof"><a href="#instanceof" class="headerlink" title="instanceof"></a><font style="color:blue;font-size:15px;">instanceof</font></h2><ul>
<li>object instanceof constructor</li>
<li>物件 instanceof 函式，回傳 boloon</li>
<li>檢查物件是否為指定的建構子所建立的實體</li>
<li>instanceof 測試實例和原型鏈中出現過的 constructor function，如果存在就會返回 true</li>
</ul>
<h2 id="Object-keys"><a href="#Object-keys" class="headerlink" title="Object.keys"></a><font style="color:blue;font-size:15px;">Object.keys</font></h2><ul>
<li>回傳一個 array，陣列中的各元素為直屬於 obj ，對應可列舉屬性名的字串</li>
</ul>
<h2 id="組合繼承流程"><a href="#組合繼承流程" class="headerlink" title="組合繼承流程"></a>組合繼承流程</h2><ul>
<li>建立子類別，增加子類別的屬性/方法</li>
<li>選擇要繼承的父類別 prototype(方法自動繼承)</li>
<li>將子類別建立好在掛載到要的父類別 prototype 上</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// 父類別</span><br><span class="line">function Energy(name,age)&#123;</span><br><span class="line">  this.name = name</span><br><span class="line">  this.age = age</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Energy.prototype.atk = function()&#123;</span><br><span class="line">  return this.name+&apos; &apos;+&apos;攻擊&apos;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="兩種新增屬性的方式"><a href="#兩種新增屬性的方式" class="headerlink" title="兩種新增屬性的方式"></a>兩種新增屬性的方式</h3><ul>
<li>用  <font style="color:red;font-size:15px;"><code>call(thisAg,arg1,argN…)</code></font> 強制指定參數<font style="color:blue;font-size:15px;">帶入父類別屬性</font> 定義新的建構子(SuperEnergy)</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">function SuperEnergy(type,name,age,status,level)&#123;</span><br><span class="line">  Energy.call(this,type,name,age,status)         // 指向新的物件</span><br><span class="line">  this.level = level                             // 子類別自己可新增屬性</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>直接新增子類別自己的屬性</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function SuperEnergy(name,type,status,level,age)&#123;</span><br><span class="line">   this.name = name</span><br><span class="line">   this.type = type</span><br><span class="line">   this.status = status</span><br><span class="line">   this.level = level</span><br><span class="line">   this.age = age </span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<h3 id="使用共同方法"><a href="#使用共同方法" class="headerlink" title="使用共同方法"></a>使用共同方法</h3><ul>
<li>將 SuperEnergy.prototype 建立在 <font style="color:blue;font-size:15px;">Object.create(Energy)</font>  上<font style="color:red;font-size:15px;">無法使用</font>共同方法</li>
<li>所以要建立在 <font style="color:blue;font-size:15px;">Object.create(Energy.prototype)</font> 上</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">// 掛載到父類別 prototype 上</span><br><span class="line">SuperEnergy.prototype = Object.create(Energy.prototype)</span><br><span class="line"></span><br><span class="line">// 指向回自己</span><br><span class="line">SuperEnergy.prototype.constructor = SuperEnergy</span><br><span class="line"></span><br><span class="line">// 物件實例步驟 </span><br><span class="line">// 可定義物件自己的屬性＆方法從 SuperEnergy 產生實例 hulk</span><br><span class="line"></span><br><span class="line">let hulk = new SuperEnergy(&apos;hulk&apos;,&apos;sencise&apos;,&apos;pace&apos;,&apos;large&apos;,45)</span><br><span class="line">hulk.skill = function(name)&#123;</span><br><span class="line">  return &apos;GAA&apos;+&apos; &apos;+&quot;I&apos;m&quot;+&apos; &apos;+this.name</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">console.log(hulk.skill()) // GAA I&apos;m hulk  GAA I&apos;m Energy</span><br><span class="line">console.log(hulk.name)    // hulk Energy</span><br><span class="line">console.log(hulk.atk())   // hulk 攻擊</span><br><span class="line">console.log(hulk.age)     // 45</span><br></pre></td></tr></table></figure>
<h4 id="原型鍊"><a href="#原型鍊" class="headerlink" title="原型鍊"></a>原型鍊</h4><ul>
<li><font style="color:blue;font-size:15px;">hulk -&gt; SuperEnergy -&gt; Energy -&gt; Object -&gt; null</font>

</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">console.log(hulk.constructor)                      // ƒ SuperEnergy(name,type,status,level)</span><br><span class="line">console.log(hulk.prototype)                        // undefined</span><br><span class="line">console.log(hulk.__proto__)                        // Energy &#123;constructor: ƒ&#125; </span><br><span class="line">console.log(hulk.__proto__.constructor)            // ƒ SuperEnergy(name,type,status,level)</span><br><span class="line">console.log(hulk.__proto__.__proto__)              // &#123;atk: ƒ, constructor: ƒ&#125;</span><br><span class="line">console.log(hulk.__proto__.__proto__.constructor)  // ƒ Energy(name,age)</span><br><span class="line">console.log(hulk.__proto__.__proto__.__proto__)    </span><br><span class="line">// &#123;constructor: ƒ, __defineGetter__: ƒ, __defineSetter__: ƒ, hasOwnProperty: ƒ, __lookupGetter__: ƒ, …&#125;</span><br><span class="line">console.log(hulk.__proto__.__proto__.__proto__.constructor)    // ƒ Object() </span><br><span class="line">console.log(hulk.__proto__.__proto__.__proto__.__proto__)      // null</span><br><span class="line"></span><br><span class="line">// 檢查物件是否為指定的建構子所建立的實體</span><br><span class="line">console.log(hulk instanceof SuperEnergy)                // true </span><br><span class="line">console.log(hulk instanceof Energy)                     // true  </span><br><span class="line">console.log(SuperEnergy instanceof Energy)              // false</span><br><span class="line">console.log(hulk.__proto__ === SuperEnergy.prototype)   // true</span><br><span class="line">console.log(SuperEnergy.__proto__=== Energy.__proto__)  // true</span><br><span class="line"></span><br><span class="line">// 可用的屬性</span><br><span class="line">console.log(Object.keys(hulk)) // [&quot;name&quot;, &quot;type&quot;, &quot;status&quot;, &quot;level&quot;, &quot;skill&quot;]</span><br><span class="line"></span><br><span class="line">// 更改父類別的方法</span><br><span class="line">Energy.prototype.atk = function()&#123;</span><br><span class="line">    return this.name+&apos; &apos;+&apos;先不攻擊&apos;</span><br><span class="line">  &#125;</span><br><span class="line">console.log(hulk.atk())  // &quot;hulk 先不攻擊&quot;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="物件繼承"><a href="#物件繼承" class="headerlink" title="物件繼承"></a>物件繼承</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">let Alien = &#123;</span><br><span class="line">  type:&apos;evialEnergy&apos;,</span><br><span class="line">  name: &apos;bloodSpider&apos;,</span><br><span class="line">  age:&apos;none&apos;,</span><br><span class="line">  status:&apos;monster&apos;,</span><br><span class="line">  speak:function(name)&#123;</span><br><span class="line">    return &quot;I&apos;m&quot;+&apos; &apos;+this.name</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let bloodSpider = Object.create(Alien)</span><br><span class="line">console.log(bloodSpider.status)        // &quot;monster&quot;</span><br><span class="line">console.log(bloodSpider.speak())       // &quot;I&apos;m bloodSpider”</span><br><span class="line">console.log(Alien.constructor)         // ƒ Object() &#123; [native code] &#125;</span><br><span class="line">console.log(Alien.prototype)           // undefined</span><br><span class="line">console.log(Alien.__proto__)           // function Object()</span><br><span class="line">console.log(Alien.__proto__.__proto__) // null</span><br></pre></td></tr></table></figure>
<h2 id="建立物件的語法"><a href="#建立物件的語法" class="headerlink" title="建立物件的語法"></a>建立物件的語法</h2><ul>
<li>物件字面定義，相等於 new Object()<ul>
<li>const newObject = { }</li>
</ul>
</li>
</ul>
<ul>
<li>使用 Object.create 方法<ul>
<li>const newObject = Object.create( proto )</li>
<li>const newObject = Object.create( proto.prototype )</li>
</ul>
</li>
</ul>
<ul>
<li>ES6 類別定義，或是建構函式<ul>
<li>const newObject = new ConstructorFunc ( )</li>
<li>const newObject = new ClassName ( )</li>
</ul>
</li>
</ul>
<hr>
<h1 id="類別宣告-class-declaration"><a href="#類別宣告-class-declaration" class="headerlink" title="類別宣告(class declaration)"></a>類別宣告(class declaration)</h1><ul>
<li>class 並非如其他物件導向語言般在宣告時期靜態的複製定義，而只是<font style="color:blue;font-size:15px;">物件間的連結</font></li>
<li>執行時期<font style="color:blue;font-size:15px;">變更父類別</font>的方法或屬性，子類別與其實體都會<font style="color:red;font-size:15px;">受到影響</font></li>
<li>class 語法<font style="color:red;font-size:15px;">無法宣告屬性</font>，<font style="color:blue;font-size:15px;">只能宣告方法</font>，因此若想宣告屬性以追蹤共用狀態，就只能回歸到 prototype </li>
<li>為了優化效能，super 是在宣告時期靜態綁定的，在某些狀況下，綁定會失敗，因此必須手動綁定</li>
<li>class 語法只能指定方法，不能設定屬性，這避免開發者誤將屬性（狀態或資料）放在類別中造成的共用問題 </li>
</ul>
<h2 id="class"><a href="#class" class="headerlink" title="class"></a>class</h2><ul>
<li>相當於建立共享方法，宣告自己的屬性</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">class Energy&#123;</span><br><span class="line">// 宣告自己的屬性</span><br><span class="line">  constructor(name,age)&#123;</span><br><span class="line">    this.name = name</span><br><span class="line">    this.age = age</span><br><span class="line">  &#125;</span><br><span class="line">// 共享方法</span><br><span class="line">  atk()&#123;</span><br><span class="line">       return this.name+&apos; &apos;+&apos;攻擊&apos;</span><br><span class="line">    &#125;</span><br><span class="line">  speak()&#123;</span><br><span class="line">    return &apos;I`am &apos; + this.name</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let Iron = new Energy(&apos;Iron&apos;,32)</span><br><span class="line"></span><br><span class="line">console.log(Iron.name)                            // Iron</span><br><span class="line">console.log(Iron.atk())                           // Iron 攻擊</span><br><span class="line">console.log(Iron.speak())                         // I`am Iron</span><br><span class="line">console.log(Iron.constructor)                     // class Energy</span><br><span class="line">console.log(Iron.__proto__.constructor)           // class Energy</span><br><span class="line">console.log(Iron.__proto__.__proto__.constructor) // function Object()</span><br><span class="line">console.log(Iron.__proto__.__proto__.__proto__)   // null</span><br></pre></td></tr></table></figure>
<h2 id="類別繼承-extends"><a href="#類別繼承-extends" class="headerlink" title="類別繼承 - extends"></a>類別繼承 - extends</h2><ul>
<li>把子類別掛載到父類別<ul>
<li>相當於設定 prototype(＿proto＿)</li>
</ul>
</li>
</ul>
<ul>
<li>原型鍊<ul>
<li><font style="color:blue;font-size:15px;">Energy -&gt; Function -&gt; Object -&gt; null</font>


</li>
</ul>
</li>
</ul>
<ul>
<li>呼叫父類別 - super<ul>
<li>在子類別中，呼叫父類別的方法或屬性來使用</li>
<li>子類必須在  <font style="color:blue;font-size:15px;">constructor 方法中調用 super 方法</font>，否則新建實例時會報錯<ul>
<li>這是因為子類自己的 this 對象，必須先通過父類的構造函數完成塑造，得到與父類同樣的實例屬性和方法，然後再對其進行加工，加上子類自己的實例屬性和方法，如果不調用 super 方法，子類就得不到 this 對象</li>
</ul>
</li>
<li>靜態綁定 - 也就是父類別的方法或屬性不會隨不同子類別變化</li>
</ul>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">class Energy&#123;</span><br><span class="line">  constructor(name,age)&#123;</span><br><span class="line">    this.name = name</span><br><span class="line">    this.age = age</span><br><span class="line">  &#125;</span><br><span class="line">  atk()&#123;</span><br><span class="line">       return this.name+&apos; &apos;+&apos;攻擊&apos;</span><br><span class="line">    &#125;</span><br><span class="line">  speak()&#123;</span><br><span class="line">    return &apos;I`am &apos; + this.name</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* 這兩句相當於下面的寫法</span><br><span class="line">    * SuperEnergy.prototype = Object.create(Energy.prototype)</span><br><span class="line">    * SuperEnergy.prototype.constructor = SuperEnergy</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">class SuperEnergy extends Energy &#123;</span><br><span class="line">  </span><br><span class="line">// 表示屬性來自父類別共用  </span><br><span class="line">  constructor(name,age,status)&#123;</span><br><span class="line">    super(name,age)</span><br><span class="line">    this.status = status</span><br><span class="line">  &#125;</span><br><span class="line">  angry()&#123;</span><br><span class="line">    return this.name+&apos; &apos;+ this.status</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">// 更改父類別方法名子並直接把相同方法掛載到 SuperEnergy 下</span><br><span class="line">  superGa()&#123;</span><br><span class="line">    return super.speak()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">console.log(SuperEnergy.prototype)       // Energy &#123;constructor: ƒ, speak: ƒ&#125;</span><br><span class="line">console.log(SuperEnergy.constructor)     // ƒ Function() </span><br><span class="line"></span><br><span class="line">console.log(SuperEnergy.__proto__)              // class Energy</span><br><span class="line">console.log(SuperEnergy.__proto__.constructor)  // ƒ Function() </span><br><span class="line">console.log(SuperEnergy.__proto__.__proto__)    // ƒ () &#123; [native code] &#125;</span><br><span class="line">console.log(SuperEnergy.__proto__.__proto__.constructor)           </span><br><span class="line">// function Function() &#123; [native code] &#125;</span><br><span class="line">console.log(SuperEnergy.__proto__.__proto__.__proto__.constructor) </span><br><span class="line">// function Object() &#123; [native code] &#125;</span><br><span class="line">console.log(SuperEnergy.__proto__.__proto__.__proto__.__proto__)   // null</span><br></pre></td></tr></table></figure>
<h2 id="建立繼承實例"><a href="#建立繼承實例" class="headerlink" title="建立繼承實例"></a>建立繼承實例</h2><ul>
<li>原型鍊<ul>
<li><font style="color:blue;font-size:15px;">SuperEnergy -&gt; Energy -&gt; Object -&gt; null</font>

</li>
</ul>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">let hulk = new SuperEnergy(&apos;hulk&apos;,45,&apos;crazy&apos;)</span><br><span class="line"></span><br><span class="line">// 實例設定自己的方法</span><br><span class="line">hulk.skill = function()&#123;</span><br><span class="line">    return &apos;GAA&apos;+&apos; &apos;+this.name +&apos; &apos;+ &quot;smash&quot;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">console.log(hulk.name)      // hulk</span><br><span class="line">console.log(hulk.status)    // crazy</span><br><span class="line">console.log(hulk.age)       // 45</span><br><span class="line">console.log(hulk.atk())     // hulk 攻擊</span><br><span class="line">console.log(hulk.angry())   // hulk crazy</span><br><span class="line">console.log(hulk.skill())   // GAA hulk smash</span><br><span class="line">console.log(hulk.speak())   // I`am hulk</span><br><span class="line">console.log(hulk.superGa()) // I`am hulk</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">console.log(hulk.prototype)              // undefined</span><br><span class="line">console.log(hulk.constructor)            // class SuperEnergy extends Energy</span><br><span class="line"></span><br><span class="line">console.log(hulk.__proto__)              // Energy &#123;constructor: ƒ, speak: ƒ&#125;</span><br><span class="line">console.log(hulk.__proto__.constructor)  // class SuperEnergy extends Energy</span><br><span class="line">console.log(hulk.__proto__.__proto__)    // &#123;constructor: ƒ, atk: ƒ&#125; </span><br><span class="line">console.log(hulk.__proto__.__proto__.constructor)           // class Energy</span><br><span class="line">console.log(hulk.__proto__.__proto__.__proto__)             </span><br><span class="line">// &#123;constructor: ƒ, __defineGetter__: ƒ, __defineSetter__: ƒ, hasOwnProperty: ƒ, __lookupGetter__: ƒ, …&#125;</span><br><span class="line">console.log(hulk.__proto__.__proto__.__proto__.constructor) // ƒ Object() </span><br><span class="line">console.log(hulk.__proto__.__proto__.__proto__.__proto__)   // null</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 子更動父的方法</span><br><span class="line">SuperEnergy.prototype.atk = function()&#123;</span><br><span class="line">  return this.name+&apos; &apos;+&apos;不要攻擊&apos;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">console.log(hulk.atk()) // hulk 不要攻擊</span><br></pre></td></tr></table></figure>
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/JavaScript/" <i class="fa fa-tag"> JavaScript</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/06/06/JS-紀錄8-function-3-Arror-function/" rel="next" title="JS 紀錄8 - function 3 (Arror function)">
                <i class="fa fa-chevron-left"></i> JS 紀錄8 - function 3 (Arror function)
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/06/15/JS-紀錄10-XMLHttpRequest、Ajax、Fetch、JSONP/" rel="prev" title="JS 紀錄10 -  XMLHttpRequest、Ajax、Fetch、JSONP">
                JS 紀錄10 -  XMLHttpRequest、Ajax、Fetch、JSONP <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  
    <div class="comments" id="comments">
      <div id="disqus_thread">
        <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
      </div>
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目錄
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            本站概要
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/panda.png" alt="Jimmy Wei">
            
              <p class="site-author-name" itemprop="name">Jimmy Wei</p>
              <div class="site-description motion-element" itemprop="description">光電/程式/工藝/設計/哲學</div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">20</span>
                    <span class="site-state-item-name">文章</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                      <a href="/categories/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">6</span>
                    <span class="site-state-item-name">分類</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                      <a href="/tags/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">16</span>
                    <span class="site-state-item-name">標籤</span>
                  </a>
                </div>
              
            </nav>
          

          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                  
                    
                  
                  <a href="https://github.com/Jimmywei01" title="GitHub &rarr; https://github.com/Jimmywei01" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i></a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                  
                    
                  
                  <a href="https://www.facebook.com/profile.php?id=100000193194715" title="FB Page &rarr; https://www.facebook.com/profile.php?id=100000193194715" rel="noopener" target="_blank"><i class="fa fa-fw fa-facebook"></i></a>
                </span>
              
            </div>
          

          

          
          

          
            
          
          

        </div>
      </div>

      
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#物件導向"><span class="nav-number">1.</span> <span class="nav-text">物件導向</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#new-關鍵字發生哪些事？"><span class="nav-number">2.</span> <span class="nav-text">new 關鍵字發生哪些事？</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#新增-修改屬性"><span class="nav-number">3.</span> <span class="nav-text">新增 / 修改屬性</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#屬性描述器-Property-descriptor"><span class="nav-number">4.</span> <span class="nav-text">屬性描述器 (Property descriptor)</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#constructor、prototype、proto和原型鏈"><span class="nav-number">5.</span> <span class="nav-text">constructor、prototype、proto和原型鏈</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Function-對象-object"><span class="nav-number">5.1.</span> <span class="nav-text">Function, 對象(object)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#建構式-Constructor"><span class="nav-number">5.2.</span> <span class="nav-text">建構式 (Constructor)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#prototype-原型對象"><span class="nav-number">5.3.</span> <span class="nav-text">prototype (原型對象)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#＿proto＿"><span class="nav-number">5.4.</span> <span class="nav-text">＿proto＿</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#原型鏈-prototype-chain"><span class="nav-number">5.5.</span> <span class="nav-text">原型鏈 (prototype chain)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#名詞整理"><span class="nav-number">5.6.</span> <span class="nav-text">名詞整理</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#原型繼承-Prototype-based-inheritance"><span class="nav-number">6.</span> <span class="nav-text">原型繼承(Prototype-based inheritance)</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#基礎"><span class="nav-number">6.1.</span> <span class="nav-text">基礎</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#繼承"><span class="nav-number">6.2.</span> <span class="nav-text">繼承</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#不指向回自己"><span class="nav-number">6.2.1.</span> <span class="nav-text">不指向回自己</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#指向回自己"><span class="nav-number">6.2.2.</span> <span class="nav-text">指向回自己</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#類別的繼承-Classical-inheritance-class-語法糖前身"><span class="nav-number">7.</span> <span class="nav-text">類別的繼承(Classical inheritance) - class 語法糖前身</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Object-create-prototype-descriptors"><span class="nav-number">7.1.</span> <span class="nav-text">Object.create(prototype, descriptors)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#isPrototypeOf-NaN"><span class="nav-number">7.2.</span> <span class="nav-text">isPrototypeOf</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#instanceof"><span class="nav-number">7.3.</span> <span class="nav-text">instanceof</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Object-keys"><span class="nav-number">7.4.</span> <span class="nav-text">Object.keys</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#組合繼承流程"><span class="nav-number">7.5.</span> <span class="nav-text">組合繼承流程</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#兩種新增屬性的方式"><span class="nav-number">7.5.1.</span> <span class="nav-text">兩種新增屬性的方式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#使用共同方法"><span class="nav-number">7.5.2.</span> <span class="nav-text">使用共同方法</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#原型鍊"><span class="nav-number">7.5.2.1.</span> <span class="nav-text">原型鍊</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#物件繼承"><span class="nav-number">7.6.</span> <span class="nav-text">物件繼承</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#建立物件的語法"><span class="nav-number">7.7.</span> <span class="nav-text">建立物件的語法</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#類別宣告-class-declaration"><span class="nav-number">8.</span> <span class="nav-text">類別宣告(class declaration)</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#class"><span class="nav-number">8.1.</span> <span class="nav-text">class</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#類別繼承-extends"><span class="nav-number">8.2.</span> <span class="nav-text">類別繼承 - extends</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#建立繼承實例"><span class="nav-number">8.3.</span> <span class="nav-text">建立繼承實例</span></a></li></ol></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jimmy Wei</span>

  

  
</div>


  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 強力驅動 v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主題 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v7.1.1</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/utils.js?v=7.1.1"></script>

  <script src="/js/motion.js?v=7.1.1"></script>



  
  


  <script src="/js/affix.js?v=7.1.1"></script>

  <script src="/js/schemes/pisces.js?v=7.1.1"></script>



  
  <script src="/js/scrollspy.js?v=7.1.1"></script>
<script src="/js/post-details.js?v=7.1.1"></script>



  


  <script src="/js/next-boot.js?v=7.1.1"></script>


  

  

  

  
  
  <script id="dsq-count-scr" src="https://Jimmywei01.disqus.com/count.js" async></script>


<script>
  var disqus_config = function() {
    this.page.url = "https://jimmywei01.github.io/2019/06/11/JS-紀錄9-object/";
    this.page.identifier = "2019/06/11/JS-紀錄9-object/";
    this.page.title = 'JS 紀錄9 - object';
    };
  function loadComments() {
    var d = document, s = d.createElement('script');
    s.src = 'https://Jimmywei01.disqus.com/embed.js';
    s.setAttribute('data-timestamp', '' + +new Date());
    (d.head || d.body).appendChild(s);
  }
  
    loadComments();
  
</script>





  


  
  <script>
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url).replace(/\/{2,}/g, '/');
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x"></i></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x"></i></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  

  

  
  <script>
    (function(){
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      bp.src = (curProtocol === 'https') ? 'https://zz.bdstatic.com/linksubmit/push.js' : 'http://push.zhanzhang.baidu.com/push.js';
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
    })();
  </script>


  

  

  

  

  

  

  

  

</body>
</html>
